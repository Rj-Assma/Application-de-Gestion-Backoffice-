<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ma Biblioth√®que</title>

  <!-- CSS -->
  <link rel="stylesheet" href="style.css">

  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <!-- jsPDF -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
</head>
<body>

<!-- ================= LOGIN ================= -->
<div id="login-page">
  <div class="centered">
    <h2>Connexion</h2>
    <form id="login-form">
      <input id="username" type="text" placeholder="Utilisateur" required>
      <input id="password" type="password" placeholder="Mot de passe" required>
      <button type="submit">Se connecter</button>
      <p id="login-error" class="error"></p>
    </form>
  </div>
</div>

<!-- ================= APP ================= -->
<div id="app" class="hidden">

  <!-- Menu button -->
  <button class="menu-btn" onclick="toggleSidebar()">‚ò∞ Menu</button>


  <!-- Sidebar -->
  <div id="mySidebar" class="sidebar">
    <a href="javascript:void(0)" class="closebtn" onclick="toggleSidebar()">√ó</a>
    <h2 style="padding-left:20px;color:#251f17;">Biblioth√®que</h2>
    <a href="#" id="menu-dashboard" onclick="showSection('dashboard')">Dashboard</a>
    <a href="#" id="menu-livres" onclick="showSection('livres')">Livres</a>
    <a href="#" id="menu-auteurs" onclick="showSection('auteurs')">Auteurs</a>
    <a href="#" id="menu-adherents" onclick="showSection('adherents')">Adh√©rents</a>
    <a href="#" id="menu-emprunts" onclick="showSection('emprunts')">Emprunts</a>
    <a href="#" id="menu-categories" onclick="showSection('categories')">Cat√©gories</a>
    <a href="#" onclick="logout()">D√©connexion</a>
  </div>

  <!-- Language selector -->
  <header class="topbar" style="position:fixed;top:12px;right:20px;z-index:1002;">
    <select id="lang" onchange="changeLanguage()">
      <option value="fr">FR</option>
      <option value="en">EN</option>
      <option value="ar">AR</option>
    </select>
  </header>

  <!-- ================= MAIN ================= -->
  <main id="main-content">

   <!-- ===== GLOBAL SEARCH BAR ===== -->
<div class="search-container" style="margin-bottom:20px;">
  <input type="text" id="global-search" placeholder="Rechercher dans toute la biblioth√®que..." style="width: 50%; padding: 10px; border-radius: 8px; border: none; color: #333; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
  <button id="global-search-btn" style="background: #d7cec9;" >üîç</button>
  <div id="global-search-results" style="margin-top:10px; "></div>
</div>


    <!-- ===== DASHBOARD ===== -->
    <section id="dashboard">
      <h1 id="title-dashboard">Tableau de Bord</h1>

      <div id="stats">
        <p>üìò Livres <span id="count-livres">0</span></p>
        <p>‚úçÔ∏è Auteurs <span id="count-auteurs">0</span></p>
        <p>üë§ Adh√©rents <span id="count-adherents">0</span></p>
        <p>üìö Emprunts <span id="count-emprunts">0</span></p>
        <p>üè∑Ô∏è Cat√©gories <span id="count-categories">0</span></p>
      </div>

      <div class="charts-grid" style="margin-top:18px;">
        <div class="chart-card"><h4>Livres par cat√©gorie</h4><canvas id="chartLivres"></canvas></div>
        <div class="chart-card"><h4>Auteurs</h4><canvas id="chartAuteurs"></canvas></div>
        <div class="chart-card"><h4>Inscriptions adh√©rents</h4><canvas id="chartAdherents"></canvas></div>
        <div class="chart-card"><h4>Emprunts</h4><canvas id="chartEmprunts"></canvas></div>
        <div class="chart-card"><h4>Part des cat√©gories</h4><canvas id="chartCategories"></canvas></div>
      </div>
    </section>

    <!-- ===== LIVRES ===== -->
    <section id="livres" style="display:none;">
      <h2 id="title-livres">Liste des Livres</h2>
      <button onclick="showForm('livres')">+ Ajouter</button>
      <button onclick="exportCSV('livres')">Exporter CSV</button>
      <button onclick="exportPDF('livres')">Exporter PDF</button>
      <div id="livres-list"></div>
    </section>

    <!-- ===== AUTEURS ===== -->
    <section id="auteurs" style="display:none;">
      <h2 id="title-auteurs">Liste des Auteurs</h2>
      <button onclick="showForm('auteurs')">+ Ajouter</button>
      <button onclick="exportCSV('auteurs')">Exporter CSV</button>
      <button onclick="exportPDF('auteurs')">Exporter PDF</button>
      <div id="auteurs-list"></div>
    </section>

    <!-- ===== ADHERENTS ===== -->
    <section id="adherents" style="display:none;">
      <h2 id="title-adherents">Liste des Adh√©rents</h2>
      <button onclick="showForm('adherents')">+ Ajouter</button>
      <button onclick="exportCSV('adherents')">Exporter CSV</button>
      <button onclick="exportPDF('adherents')">Exporter PDF</button>
      <div id="adherents-list"></div>
    </section>

    <!-- ===== EMPRUNTS ===== -->
    <section id="emprunts" style="display:none;">
      <h2 id="title-emprunts">Liste des Emprunts</h2>
      <button onclick="showForm('emprunts')">+ Ajouter</button>
      <button onclick="exportCSV('emprunts')">Exporter CSV</button>
      <button onclick="exportPDF('emprunts')">Exporter PDF</button>
      <div id="emprunts-list"></div>
    </section>

    <!-- ===== CATEGORIES ===== -->
    <section id="categories" style="display:none;">
      <h2 id="title-categories">Liste des Cat√©gories</h2>
      <button onclick="showForm('categories')">+ Ajouter</button>
      <button onclick="exportCSV('categories')">Exporter CSV</button>
      <button onclick="exportPDF('categories')">Exporter PDF</button>
      <div id="categories-list"></div>
    </section>

  </main>
</div>

<!-- ===== POPUP FORM ===== -->
<div id="form-popup" class="hidden centered" style="position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);z-index:2000;">
  <h3 id="form-title"></h3>
  <form id="entity-form">
    <div id="form-fields"></div>
    <button type="submit">Enregistrer</button>
    <button type="button" onclick="closeForm()">Annuler</button>
  </form>
</div>

<!-- JS -->
<script src="script.js"></script>
</body>
</html>
